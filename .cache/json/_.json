{"data":{"prismic":{"allHomes":{"edges":[{"node":{"bio":{"__typename":"PRISMIC_Bio","heading":[{"type":"heading1","text":"Welcome","spans":[]}],"content":[{"type":"paragraph","text":"Thanks for visiting my site! I'm a Frontend Engineer based out of New York City. I hope you enjoy and please reach out to stay connected! ","spans":[]},{"type":"paragraph","text":"                   Cheers,","spans":[]},{"type":"paragraph","text":"                   Kahil","spans":[{"start":0,"end":24,"type":"em"}]}],"_meta":{"uid":"bio"},"profile_pic":{"dimensions":{"width":2100,"height":2100},"alt":"Profile","copyright":null,"url":"https://images.prismic.io/kahildev/6f04a49e-5e77-42e3-9aaf-ff891983fdd1_me-3.jpg?auto=compress,format"}},"content":[{"type":"paragraph","text":"I am a Frontend Engineer who loves to help organizations find creative solutions to their digitally-based problems.","spans":[]}],"heading":[{"type":"heading1","text":"Kahil Nayton","spans":[]}],"project_heading":[{"type":"heading1","text":"Projects","spans":[]}],"project_list":[{"project":{"__typename":"PRISMIC_Project","title":[{"type":"heading1","text":"Marino pr","spans":[]}],"description":[{"type":"paragraph","text":"I was the full stack developer on the team that redesigned are restructured how content is managed on their marketing site. Marino is a fully integrated, strategic communications firm of media specialists and digital strategists building brands and changing perceptions.","spans":[]}],"preview_text":"Marino is a fully integrated, strategic communications firm of media specialists and digital strategists building brands and changing perceptions.","release_date":"2021-01-04","_meta":{"uid":"marino-pr"},"project_image":{"dimensions":{"width":512,"height":512},"alt":"Marino logo","copyright":null,"url":"https://images.prismic.io/kahildev/67ee70ea-6007-4069-be35-4795626ad1e8_icon-512x512.png?auto=compress,format"},"project_imageSharp":{"absolutePath":"/Users/kn/Desktop/codeProjects/dev-portfolio/.cache/caches/@prismicio/gatsby-source-prismic-graphql/07f07fcfac2d851ff74d821e8198c91a/67ee70ea-6007-4069-be35-4795626ad1e8_icon-512x512.png"},"project_link":{"__typename":"PRISMIC__ExternalLink","url":"https://www.marinopr.com/","target":null}}},{"project":{"__typename":"PRISMIC_Project","title":[{"type":"heading1","text":"AnyClip","spans":[]}],"description":[{"type":"paragraph","text":"I was the lead Full Stack Developer for converting the existing AnyClip Word Press site to a modern React CMS application.","spans":[]},{"type":"paragraph","text":"AnyClip is a video data and technology company revolutionizing the digital video industry with software, insights and services for media companies and marketers.","spans":[]},{"type":"paragraph","text":"We are here to help you see a brighter future for your video business and create meaningful viewing experiences for your audience using our platform’s smart, modern, AI-powered tools.","spans":[]}],"preview_text":"AnyClip is a video data and technology company revolutionizing the digital video industry with software, insights and services for media companies and marketers.\n\nWe are here to help you see a brighter future for your video business and create meaningful viewing experiences for your audience using our platform’s smart, modern, AI-powered tools.","release_date":"2020-05-01","_meta":{"uid":"anyclip"},"project_image":{"dimensions":{"width":292,"height":150},"alt":null,"copyright":null,"url":"https://prismic-io.s3.amazonaws.com/kahildev/3838b81b-ce5d-4ed2-b88c-9c6fe291a6d1_logo_anyclip_full.svg"},"project_imageSharp":{"absolutePath":"/Users/kn/Desktop/codeProjects/dev-portfolio/.cache/caches/@prismicio/gatsby-source-prismic-graphql/c749e3ecdc7b6d8803976c4386f401f8/3838b81b-ce5d-4ed2-b88c-9c6fe291a6d1_logo_anyclip_full.svg"},"project_link":{"__typename":"PRISMIC__ExternalLink","url":"https://www.anyclip.com/","target":null}}},{"project":{"__typename":"PRISMIC_Project","title":[{"type":"heading1","text":"Our Bond","spans":[]}],"description":[{"type":"paragraph","text":"Built a booking system for ourbond.com. This project involved collecting a detailed form fro the user, calculating the total that would be charged for the service, processing the payment and then finally sending the entire order form to a command center.","spans":[]}],"preview_text":"Built a booking system for ourbond.com. This project involved collecting a detailed form fro the user, calculating the total that would be charged for the service, processing the payment and then finally sending the entire order form to a command center.","release_date":"2020-10-27","_meta":{"uid":"ourbond.com"},"project_image":{"dimensions":{"width":365,"height":320},"alt":null,"copyright":null,"url":"https://prismic-io.s3.amazonaws.com/kahildev/1efa7013-6642-4ea1-b659-dfe6a707132c_bond-logo-thanks-page.svg"},"project_imageSharp":{"absolutePath":"/Users/kn/Desktop/codeProjects/dev-portfolio/.cache/caches/@prismicio/gatsby-source-prismic-graphql/c2d18fcdff9a36aba994ea22b1a13f08/1efa7013-6642-4ea1-b659-dfe6a707132c_bond-logo-thanks-page.svg"},"project_link":{"__typename":"PRISMIC__ExternalLink","url":"https://www.ourbond.com/guard/","target":null}}},{"project":{"__typename":"PRISMIC_Project","title":[{"type":"heading1","text":"Leading Edge","spans":[]}],"description":[{"type":"paragraph","text":"I was the lead Full Stack Developer for the redesign and restructure for Brooklyn based nonprofit, Leading Edge.","spans":[]},{"type":"paragraph","text":"Leading Edge influences and inspires dramatic change in how Jewish organizations attract, develop, and retain top talent. Leading Edge’s flagship program areas focus on supporting and developing CEOs, strengthening partnerships between lay leaders and professionals, and helping to create leading places to work.","spans":[]}],"preview_text":"Leading Edge influences and inspires dramatic change in how Jewish organizations attract, develop, and retain top talent. Leading Edge’s flagship program areas focus on supporting and developing CEOs, strengthening partnerships between lay leaders and professionals, and helping to create leading places to work.","release_date":"2020-06-14","_meta":{"uid":"working-with-mailchimp-in-gatsby"},"project_image":{"dimensions":{"width":2474,"height":1178},"alt":"Leading Edge","copyright":null,"url":"https://images.prismic.io/kahildev/d6a53a3f-cb12-46ef-b80d-b9c3a01c7c3f_Screenshot+2020-06-28+17.58.00.jpg?auto=compress,format"},"project_imageSharp":{"absolutePath":"/Users/kn/Desktop/codeProjects/dev-portfolio/.cache/caches/@prismicio/gatsby-source-prismic-graphql/5940d83d5b9db09ee5015be8bc215a2b/d6a53a3f-cb12-46ef-b80d-b9c3a01c7c3f_Screenshot+2020-06-28+17.58.00.jpg"},"project_link":{"__typename":"PRISMIC__ExternalLink","url":"https://leadingedge.org/","target":null}}}],"contact_list":[{"contact":{"__typename":"PRISMIC_Contact","link_label":"Twitter","_linkType":"Link.document","_meta":{"uid":"twitter"},"link":{"__typename":"PRISMIC__ExternalLink","url":"https://twitter.com/kahilnayton"}}},{"contact":{"__typename":"PRISMIC_Contact","link_label":"LinkedIn","_linkType":"Link.document","_meta":{"uid":"linkedin"},"link":{"__typename":"PRISMIC__ExternalLink","url":"https://www.linkedin.com/in/kahilnayton/"}}},{"contact":{"__typename":"PRISMIC_Contact","link_label":"Instagram","_linkType":"Link.document","_meta":{"uid":"instagram"},"link":{"__typename":"PRISMIC__ExternalLink","url":"https://www.instagram.com/kahilnayton/?hl=en"}}}],"body":[{"__typename":"PRISMIC_HomeBodyHero","type":"hero","label":null,"primary":{"background_image":{"dimensions":{"width":2000,"height":900},"alt":"City Scape","copyright":null,"url":"https://images.prismic.io/kahildev/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.jpeg?auto=compress,format&rect=0,308,3625,1631&w=2000&h=900"},"hero_content":"I'm a Frontend Engineer who loves to help organizations find creative solutions to their digitally-based problems.","hero_title":[{"type":"heading1","text":"Frontend Engineer","spans":[]}],"background_imageSharp":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB1wXWIwEg3//EABsQAAICAwEAAAAAAAAAAAAAAAECABEDExQh/9oACAEBAAEFAulDNyWMq0IPUQkL/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/AYmP/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/Aauv/8QAGhAAAgIDAAAAAAAAAAAAAAAAADIBAhAhYf/aAAgBAQAGPwJRRcWnho//xAAeEAACAQMFAAAAAAAAAAAAAAAAAREhMXFBUZGxwf/aAAgBAQABPyF1T5IkqxNsmnPgqc3n0LaY/9oADAMBAAIAAwAAABAID//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAwEBPxBLsR//xAAWEQEBAQAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8QGZD/xAAeEAEBAAEEAwEAAAAAAAAAAAABEQAhMVFhQYGhwf/aAAgBAQABPxAlTpvCmQ/XJe8dDYYgn7hqudXm7q84JNcOumKACr9z/9k="},"images":{"fallback":{"src":"/static/cac3fbf437c0ef9f1d04218c7445518c/944d8/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.jpg","srcSet":"/static/cac3fbf437c0ef9f1d04218c7445518c/fc3e7/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.jpg 906w,\n/static/cac3fbf437c0ef9f1d04218c7445518c/562a7/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.jpg 1813w,\n/static/cac3fbf437c0ef9f1d04218c7445518c/944d8/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.jpg 3625w","sizes":"(min-width: 3625px) 3625px, 100vw"},"sources":[{"srcSet":"/static/cac3fbf437c0ef9f1d04218c7445518c/979d2/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.avif 906w,\n/static/cac3fbf437c0ef9f1d04218c7445518c/d3c68/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.avif 1813w,\n/static/cac3fbf437c0ef9f1d04218c7445518c/1c042/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.avif 3625w","type":"image/avif","sizes":"(min-width: 3625px) 3625px, 100vw"},{"srcSet":"/static/cac3fbf437c0ef9f1d04218c7445518c/ae56f/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.webp 906w,\n/static/cac3fbf437c0ef9f1d04218c7445518c/63549/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.webp 1813w,\n/static/cac3fbf437c0ef9f1d04218c7445518c/1b094/a21cd03e-673f-4b2b-b6a1-268ca19e50bd_nyc-1.webp 3625w","type":"image/webp","sizes":"(min-width: 3625px) 3625px, 100vw"}]},"width":3625,"height":2250}}}}}],"contact_heading":[{"type":"heading1","text":"Contact","spans":[]}],"blog_list":[{"blog":{"__typename":"PRISMIC_Blog","title":[{"type":"heading1","text":"Parallax and Gatsby.js","spans":[]}],"description":[{"type":"image","url":"https://images.prismic.io/kahildev/5baa56d9-9658-44c7-b205-4647659a1897_Gatsby+para.jpg?auto=compress,format","alt":"parallax and gatsby","copyright":null,"dimensions":{"width":2048,"height":1536}},{"type":"paragraph","text":"Last year I was working on a history page for a client that would showcase all of their achievements and milestones over the last 30 odd years. There was a lot of content and we wanted to feature it in an exciting way. Here's the final product. Lets get straight into it and talk about creating parallax in Gatsby.js!","spans":[{"start":230,"end":243,"type":"hyperlink","data":{"link_type":"Web","url":"https://marinopr.com/history"}}]},{"type":"paragraph","text":"gatsby-browser.js","spans":[]},{"type":"preformatted","text":"import React from \"react\";\nimport { ParallaxProvider } from \"react-scroll-parallax\";\n\nexport const wrapPageElement = ({ element, props }) => {\n  return <ParallaxProvider>{element}</ParallaxProvider>\n};","spans":[]},{"type":"paragraph","text":"Working with Gatsby can be tricky at times as a frontend developer because since it's a static site generator that creates your site during the build phase you can't reference the window object like you're used to. Parallax is all about scrolling so you need this reference and that's where the gatsby-browser.js come is. It lets you respond to actions within the browser, and wrap your site in additional components, which is exactly what's happening in the code above. We import our parallax library and wrap our page element with it. ","spans":[]},{"type":"paragraph","text":"Managing Content","spans":[{"start":0,"end":16,"type":"strong"}]},{"type":"paragraph","text":"I'm a big fan of Prismic and their simplistic methodology of grouping content into single and repeatable types makes this task a breeze. This page was architected by creating a single type of history page, where all the general page information could be kept. Then inside of this type, we initialize the slice-zone, which is basically just content components that you can pre-define. My slice is called timeline section. Inside the slice-zone we again have the option of placing our content into single or repeatable buckets. I'm going to give my slice zone a nonrepeatable property of year and then within the repeatable zone an image, secondary image, description, and a select dropdown that will toggle the size of our desired text. So back in our Gatsby app, our graphQL query is going to look something like this. ","spans":[]},{"type":"preformatted","text":"export const query = graphql`\n  {\n    prismic {\n      allHistorys {\n        edges {\n          node {\n            feature_image\n            short_description\n            heading\n            body {\n              ... on PRISMIC_HistoryBodyTimeline_section {\n                type\n                primary {\n                  year\n                }\n                fields {\n                  image\n                  secondary_image\n                  month\n                  text\n                  text_size\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"Rendering Content","spans":[{"start":0,"end":17,"type":"strong"}]},{"type":"paragraph","text":"Now that we have all our content in place let's render it on the page. First, don't forget to install our parallax package. ","spans":[]},{"type":"paragraph","text":"npm i react-scroll-parallax ","spans":[{"start":0,"end":27,"type":"em"}]},{"type":"paragraph","text":"This package is pretty straight forward to use. You just have to feed each element an X and Y coordinate like so. ","spans":[]},{"type":"preformatted","text":"  <PrimaryImage even={evenSection} first={firstYear}>\n    <Parallax y={[0, 0]}>\n      <img src={section.image.url} alt={section.image.alt} />\n    </Parallax>\n  </PrimaryImage>","spans":[]},{"type":"paragraph","text":"I'm using styled comments here which makes it super easy to add a little more logic to your parallax, such as checking odd and even indexes on the array and then adjusting the styles accordingly to have the content ping pong from left to right. I recently wrote a parallax page from scratch, which is a fun exercise, but for the most part It feels like this react parallax package is completely sufficient for our purposes.","spans":[]}],"preview_text":"I'm using styled comments here which makes it super easy to add a little more logic to your parallax, such as checking odd and even indexes on the array and then adjusting the styles accordingly to have the content ping-pong from left to right.","release_date":"2021-02-12T05:00:00+0000","_meta":{"uid":"last-year-i-was-working-on-a-history-page-for-a-client"},"blog_image":{"dimensions":{"width":2048,"height":1536},"alt":"Gatsby parallax","copyright":null,"url":"https://images.prismic.io/kahildev/362230ee-e831-4c86-9ec4-3ee5f78f2627_Gatsby+para.jpg?auto=compress,format"},"tech_stack":[{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/4de56571-a10b-4bc1-bff7-d16ab56d8e44_gatsbyjs-icon.svg","alt":"Gatsby","copyright":null,"dimensions":{"width":64,"height":64}}]},{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/4a80a347-3d60-4579-b66f-be66ffcf5889_GraphQL_Logo.svg","alt":"Graph QL","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/86ee8123-15f8-4474-9984-2e6a2a430c08_prismic-icon.svg","alt":"Prsimic","copyright":null,"dimensions":{"width":256,"height":256}}]},{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/1769e61f-452b-4e91-b738-a1ffb65834bc_react-original-wordmark.svg","alt":"React","copyright":null,"dimensions":{"width":150,"height":150}}]}],"blog_link":{"__typename":"PRISMIC__ExternalLink","target":null,"url":"https://marinopr.com/history"}}},{"blog":{"__typename":"PRISMIC_Blog","title":[{"type":"heading1","text":"Choosing the right static site generator","spans":[]}],"description":[{"type":"paragraph","text":"All this buzz about generating static files... ","spans":[{"start":0,"end":47,"type":"strong"}]},{"type":"paragraph","text":"When researching different React frameworks for a new project we are barraged with an array of features that both Gatsby.js and Next.js tout to have, such as improved SEO, server-side rendering, and superior performance. However, to find out how these frameworks work and how they differ takes a little more digging beneath the surface. Let's take a little trip back in time so that we can better understand how they fit in the greater scheme of things. ","spans":[]},{"type":"paragraph","text":"What is HTML anyway?","spans":[{"start":0,"end":20,"type":"strong"}]},{"type":"paragraph","text":"The year is 1989 and a rather gifted computer scientist by the name of Tim Berners Lee was coming up with a system for the increasingly complicated task of computers communicating with one another. At this point, the precursor to the internet was nothing more than a few machines spread out across different university campuses in the USA sharing data. It was becoming a complicated task and Lee’s solution was a way of mitigating this complexity and it turned out to become one of the cornerstone concepts of the Internet as we know it today. ","spans":[]},{"type":"paragraph","text":"Essentially Lee borrowed a concept from a fellow colleague at CERN Ted Nelson. This was the concept of the hypertext and Berners Lee applied it to a protocol he was creating that would become known as HTTP and subsequently the WorldWideWeb. Now there are dissertations written on this topic and I am by no means qualified to get into the details, but at its core HTTP is a series of links that point to different resources, and since it's a protocol it needs to operate with certain parameters. One such parameter is the relationship between a server (the system that serves the information) and the client (the system that receives it).","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"HTML","spans":[{"start":0,"end":4,"type":"strong"}]},{"type":"paragraph","text":"One aspect of the new information management system that Berners Lee had created was a language known as HyperText Markup Language (HTML). So this might be common knowledge for most of us because HTML is still widely used today and is still the first file a browser will begin compiling when it gets a website's data back from a server. ","spans":[]},{"type":"paragraph","text":"A lot has changed since 1989 and we need to take a lot more into consideration, but this underlining principle remains the same, the client asks the server for some information to build the site and will begin with the HTML document. Before we start talking about parsing this data let’s quickly look at the other crucial steps that must happen nowadays. ","spans":[]},{"type":"paragraph","text":"To start with we need to verify our IP address and in order to do this, we make a request to the DNS server and verify our own address as well as get the IP of the address we are requesting. Also, we don’t actually use the original HTTP these days and for scalability and security reasons HTTP/1.1, HTTP/2, and SSL/TLS are all much more widely used because of the aforementioned issues. ","spans":[]},{"type":"image","url":"https://images.prismic.io/kahildev/125a88f2-f47c-4f34-b10c-28899ab33530_Web-2.png?auto=compress,format","alt":null,"copyright":null,"dimensions":{"width":760,"height":450}},{"type":"paragraph","text":"The critical rendering path ","spans":[{"start":0,"end":28,"type":"strong"}]},{"type":"paragraph","text":"Let’s not forget these are computers we’re dealing with so the browser isn’t actually going to read the HTML itself, but rather it consumes the HTML as bytes of data and then converts that data into characters, which are further processed into tokens. So your browser sees HTML and it will trigger this chain reaction. HTML - bytes - characters - tokens. The browser then takes the tokens and creates a tree-like data structure that we refer to as the document object model, DOM. ","spans":[]},{"type":"paragraph","text":"So the browser is busy away constructing the DOM from top to bottom and it comes across a style tag. Well, what does it do? Yep, you guessed it... It converts the CSS into data. Then characters. Then tokens, and begins creating another object model, this time the CSS Object Model or CSSOM. This new CSSOM can actually be constructed concurrently as the DOM is being put together. In fact, it's critical that these are the first things that the browser starts creating. This is one of the reasons we’ll often see the styles included at the top of our HTML file, the other being, that we can't start parsing our JS until the CSSOM has completed, so let's talk about that a little now. ","spans":[]},{"type":"image","url":"https://images.prismic.io/kahildev/3c28bd5b-48a3-4be3-88d6-1ff2e5525ce1_Bytes.png?auto=compress,format","alt":null,"copyright":null,"dimensions":{"width":2048,"height":1536}},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"Performance and the browser","spans":[{"start":0,"end":27,"type":"strong"}]},{"type":"paragraph","text":"When the HTML parser finds a <script> tag, it pauses the parsing of the HTML document and has to load, parse, and execute the JavaScript code. This is because JavaScript might be used to change the shape of the document model. Yes, that's right the browser has to stop processing the HTML and the construction of the DOM in order to interpret the JS. We will often leave our JS code at the bottom of the HTML for this reason so that you can allow the DOM to be created first before processing it. So the browser encountering a script tag will stop it in its tracks. By default, the DOM will stop being compiled if it encounters a script, but this is not the case for the CSSOM, which will actually take precedence over the JS. So that pretty much rounds out the default order of priorities when compiling our code. ","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"How can we be more deliberate with how we want our code to run?","spans":[{"start":0,"end":63,"type":"strong"}]},{"type":"paragraph","text":"So I still want to move onto server-side rendering, but a quick note on performance and some important keywords to keep in mind. We can use the async and defer keywords on a script tag to instruct the browser to run our code asynchronously and continue parsing the document when they encounter a script tag. With async, the file gets downloaded asynchronously and then executed as soon as it's downloaded. With defer, the file gets downloaded asynchronously but executed only when the document parsing is completed. With defer, scripts will execute in the same order as they are called.","spans":[{"start":144,"end":149,"type":"em"},{"start":154,"end":159,"type":"em"}]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"How Next and Gatsby work","spans":[{"start":0,"end":24,"type":"strong"}]},{"type":"paragraph","text":"So what's the difference here? If you compare them by the questions they're answering then essentially they're solving the same problem, but they're doing it in very different ways. With Gatsby.js, we're going to physically create our static assets during the build phase, but by contrast, Next.js performs automatic server-side rendering so it renders your assets on the server and then sends them to the client. Applying our history lesson here. What exactly happens when you type a URL into the browser when using these frameworks? With Gatsby.js and Next.js you get an HTML file, but the mechanics differ behind the scenes. However, it's important to be aware of how this will be parsed. In Next.js, when you request something, it goes to Node.js. Node.js pre-renders all the content on the server, and it serves it right down to you as if your browser had rendered itself. They are both fantastic and have their own individual pros and cons depending on your situation.","spans":[{"start":414,"end":535,"type":"em"}]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"Conclusion","spans":[{"start":0,"end":10,"type":"strong"}]},{"type":"paragraph","text":"So much is done for us these days when we spin up a new react app, which is fine because it lets us focus our attention on actually building things, but how the browser works and renders your files is a crucial aspect to grasp in order to debug your applications and to improve performance. As always, the browser dev tools are your friend and are constantly rolling out new and improved features so I'd encourage you to keep up to date with those developments and don’t forget to run reports on your sites to catch any underlining issues.","spans":[]},{"type":"paragraph","text":"","spans":[]}],"preview_text":"When the HTML parser finds a <script> tag, it pauses the parsing of the HTML document and has to load, parse, and execute the JavaScript code. This is because JavaScript might be used to change the shape of the document model. Yes, that's right the browser has to stop processing the HTML and the construction on the DOM in order to interpret the JS.","release_date":"2021-02-08T05:00:00+0000","_meta":{"uid":"choosing-the-right-framework"},"blog_image":{"dimensions":{"width":1400,"height":1400},"alt":null,"copyright":null,"url":"https://images.prismic.io/kahildev/5c1a73a6-68f2-4a19-a916-dcb20ea06404_v8.jpg?auto=compress,format"},"tech_stack":[{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/4de56571-a10b-4bc1-bff7-d16ab56d8e44_gatsbyjs-icon.svg","alt":"gatsby","copyright":null,"dimensions":{"width":64,"height":64}}]},{"tech":[{"type":"image","url":"https://images.prismic.io/kahildev/bb125147-02a7-4bb9-b5bc-7a3d886f2929_nextjs-logo.png?auto=compress,format","alt":"next","copyright":null,"dimensions":{"width":1626,"height":1347}}]},{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/5007b50c-2574-4f28-a73c-1c0be72fde79_html5-original-wordmark.svg","alt":"html","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://images.prismic.io/kahildev/8583e10b-1081-4837-a849-539238bfc7e0_http.png?auto=compress,format","alt":"http","copyright":null,"dimensions":{"width":1280,"height":663}}]},{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/dc5cdf71-89c3-4d1e-8a99-4f319f7500c0_css3-original-wordmark.svg","alt":"css","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://kahildev.cdn.prismic.io/kahildev/f0576f62-8c11-4be4-8357-e043f79bc65e_javascript-original.svg","alt":"js","copyright":null,"dimensions":{"width":150,"height":150}}]}],"blog_link":null}},{"blog":{"__typename":"PRISMIC_Blog","title":[{"type":"heading1","text":"YouTube iframe API integration","spans":[]}],"description":[{"type":"paragraph","text":"Making the YouTube API adaptive and modular with ES6 syntax and prototypal inheritance.","spans":[{"start":0,"end":87,"type":"strong"}]},{"type":"paragraph","text":"The YouTube iframe API requires a pretty opinionated setup so I want to take a moment to walk through how we managed this integration with our own modern JavaScript setup. The developer docs for the YouTube embed API are very good with one caveat, they require that the onYouTubeIframeReady() be applied to the global window object. For small applications, this is probably fine, but if you're using ES6 modules and Webpack to compile your JS then instantiating methods on the global object is not optimal. Here's an example of how we approached this problem. ","spans":[{"start":176,"end":191,"type":"hyperlink","data":{"link_type":"Web","url":"https://developers.google.com/youtube/iframe_api_reference"}},{"start":270,"end":292,"type":"strong"}]},{"type":"paragraph","text":"First, we assign our custom YouTube class to a variable. Then with that variable bound to the method found in our custom class, we reassign the global onYouTubeIframeAPIReady() that YouTube API is listening for, with the method we instantiating in our class.","spans":[{"start":0,"end":258,"type":"em"}]},{"type":"preformatted","text":"var YT = new YouTubeScript();\nwindow.onYouTubeIframeAPIReady = YT.onYouTubeIframeAPIReady(YT);","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"Now lets look at our custom onYouTubeIframeAPIReady()","spans":[{"start":0,"end":53,"type":"em"}]},{"type":"paragraph","text":"Here things get interesting... We have to pass a parameter of 'instance' into our function and then assign the global YT method back to that instance.","spans":[]},{"type":"preformatted","text":"  onYouTubeIframeAPIReady(instance) {\n  \twindow.YT = instance;\n  \treturn function() {\n  \t\tjQuery('.yt_player').each(function(index) {\n\n\t      YT.YTplayer[index] = new YT.Player(jQuery(this)[0], {\n\t        events: {\n\t          'onReady' : YT.onPlayerReady,\n\t          'onStateChange': YT.onPlayerStateChange\n\t        }\n\t      });\n\n\t      jQuery(this).parent().find('.you_tube_play_button').on('click', function() {\n\t        YT.YTplayer[index].playVideo();\n\t      });\n\n\t    });\n  \t}\n  };","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"We can actually refactor this bit to make it a little easier to read with the use of the bind method in JS. The above code is really just a workaround for the way that JavaScript binds methods to the global object. We can be more explicit by refactoring the code in this way.","spans":[{"start":215,"end":275,"type":"em"}]},{"type":"preformatted","text":"  this.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady.bind(this);\n        this.exitHandler = this.exitHandler.bind(this);\n        this.onPlayerReady = this.onPlayerReady.bind(this);\n        this.onPlayerStateChange = this.onPlayerStateChange.bind(this);","spans":[]},{"type":"paragraph","text":"Here we are specifying the scope of the 'this' keyword by binding it to the appropriate function.","spans":[]},{"type":"paragraph","text":"Now we can access the players' lifecycle methods inside our own class and manipulate the video depending on what state it is in. ","spans":[]},{"type":"preformatted","text":"  onPlayerStateChange(e) {\n    let iframe = e.target.h;\n    if (( e.data == 1 || e.data == -1 || e.data == 3 )&& !YT.wasFullScreen) {\n      var requestFullScreen = iframe.requestFullScreen || iframe.mozRequestFullScreen || iframe.webkitRequestFullScreen;\n      if (requestFullScreen) {\n        iframe.style.display = 'initial';\n        requestFullScreen.bind(iframe)();\n      }\n      if (document.addEventListener) {\n          document.addEventListener('webkitfullscreenchange', YT.exitHandler, false);\n          document.addEventListener('mozfullscreenchange', YT.exitHandler, false);\n          document.addEventListener('fullscreenchange', YT.exitHandler, false);\n          document.addEventListener('MSFullscreenChange', YT.exitHandler, false);\n      }\n    }\n  }","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"At this point, we're pretty much off to the races! We can manipulate the player however we see fit and have integrated the YouTube API without too much pollution to the global state object. This setup also keeps things nice and organized and modular!","spans":[]},{"type":"paragraph","text":"","spans":[]}],"preview_text":"First, we assign our custom YouTube class to a variable. Then with that variable bound to the method found in our custom class, we reassign the global method that YouTube API is listening for, with the method we instantiating in our class.","release_date":"2021-01-08T05:00:00+0000","_meta":{"uid":"making-the-youtube-api-adaptive-and-modular-with-es6"},"blog_image":{"dimensions":{"width":502,"height":211},"alt":"You tube","copyright":null,"url":"https://prismic-io.s3.amazonaws.com/kahildev/ed0d2060-f4d5-49a2-9595-9e8f223d0f0a_you_tube.svg"},"tech_stack":[{"tech":[{"type":"image","url":"https://images.prismic.io/kahildev/898d255f-d309-4a3a-be84-e4f5e08614e4_analysis-of-php-s-cve-2016-6289-and-cve-2016-6297-2911.png?auto=compress,format","alt":"PHP","copyright":null,"dimensions":{"width":535,"height":366}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/ed0d2060-f4d5-49a2-9595-9e8f223d0f0a_you_tube.svg","alt":"you tube ","copyright":null,"dimensions":{"width":502,"height":211}}]},{"tech":[{"type":"image","url":"https://images.prismic.io/kahildev/f432486f-2f99-4848-8592-06588e4683c5_es6.png?auto=compress,format","alt":"es6","copyright":null,"dimensions":{"width":288,"height":288}}]}],"blog_link":{"__typename":"PRISMIC__ExternalLink","target":null,"url":"https://www.ourbond.com/"}}},{"blog":{"__typename":"PRISMIC_Blog","title":[{"type":"heading1","text":"Todo - the MERN stack ","spans":[]}],"description":[{"type":"heading4","text":"React / Redux client with a MongoDB / Node / Express server","spans":[]},{"type":"image","url":"https://images.prismic.io/kahildev/c4465d3f-7c5a-499f-82f7-7731d2f36bfb_Screen+Shot+2020-12-21+at+2.54.15+PM.jpg?auto=compress,format","alt":"Project image","copyright":null,"dimensions":{"width":2418,"height":1376}},{"type":"paragraph","text":"I worked on a project last year for Reuters that was an application, which educated journalists on identifying manipulated media. You can learn more about it here. This app was translated into 16 languages so it required global state in order to keep track of the language you were reading in at all times. While this was a super fun project to work on I still didn't quite grasp every nuance of working on a complex production-ready Redux app. So, in the spirit of a better and more productive 2021, I decided to test my luck at building the proverbial todo app and freshen up on some of these concepts. ","spans":[{"start":158,"end":162,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.reuters.com/article/rpb-hazeldeepfakesblog/introducing-the-reuters-guide-to-manipulated-media-in-association-with-the-facebook-journalism-project-idUSKBN1YY14C"}},{"start":164,"end":306,"type":"em"}]},{"type":"paragraph","text":"","spans":[]},{"type":"heading5","text":"State management","spans":[{"start":0,"end":16,"type":"strong"}]},{"type":"paragraph","text":"When it comes to building React applications, using a third-party tool such as redux to manage state can be a tad overkill, and for the most part, you could probably make do with the context API, which comes shipped with React 16. Having said that... I'm going to use Redux purely from an exploratory perspective. Instead of ranting on about how redux works (you can check out their excellent documentation here) I'm just going to point out a couple of places that were significant for me at least or areas that were just very cool. 🤓","spans":[{"start":79,"end":84,"type":"hyperlink","data":{"link_type":"Web","url":"https://redux.js.org/"}},{"start":128,"end":230,"type":"em"},{"start":407,"end":411,"type":"hyperlink","data":{"link_type":"Web","url":"https://redux.js.org/introduction/getting-started"}}]},{"type":"heading5","text":"Asynchronous ","spans":[{"start":0,"end":13,"type":"strong"}]},{"type":"paragraph","text":"","spans":[]},{"type":"preformatted","text":"export const removeTodo = (user_id, todo_id) => {\n  return (dispatch) => {\n    return apiCall(\"delete\", `/api/users/${user_id}/todos/${todo_id}`)\n      .then(() => dispatch(remove(todo_id)))\n      .then(history.push('/'))\n      .catch((err) => {\n        addError(err.message);\n      });\n  };\n};","spans":[]},{"type":"paragraph","text":"Since Redux isn't inherently asynchronous we can leverage middleware (in my case redux-thunk) to create asynchronous actions. ","spans":[{"start":0,"end":126,"type":"em"}]},{"type":"paragraph","text":"","spans":[]},{"type":"heading5","text":"Modularity","spans":[{"start":0,"end":10,"type":"strong"}]},{"type":"paragraph","text":"While the learning curve for Redux at first can seem a little overwhelming and the set up a little tedious, you only need to do this once. When you understand the underlining principles there really isn't all that much more to get and you will be able to scale your applications much more efficiently and with greater modularity. ","spans":[{"start":139,"end":330,"type":"em"}]},{"type":"preformatted","text":"import { REMOVE_TODO, LOAD_TODOS, UPDATE_TODO } from '../actionTypes'\n\nconst todo = (state = [], action) => {\n  switch (action.type) {\n    case LOAD_TODOS:\n      return [...action.todos];\n    case REMOVE_TODO:\n      return state.filter(todo => todo._id !== action.id);\n    case UPDATE_TODO:\n      return state.map(t => {\n        if (t._id === action.id) {\n          t.done = true;\n        };\n        return t;\n      })\n\n    default:\n      return state;\n  }\n}\n\n\nexport default todo;","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"heading5","text":"MongoDB ","spans":[{"start":0,"end":8,"type":"strong"}]},{"type":"paragraph","text":"MongoDB is pretty awesome... For the longest time, any full-stack application I've been working on has used  PostgreSQL. One of the things I enjoyed about MongoDB was its handy inbuilt methods for interacting with the DB. ","spans":[{"start":109,"end":119,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.postgresql.org/"}}]},{"type":"preformatted","text":"exports.updateTodo = async function (req, res, next) {\n  try {\n    let updatedTodo = await db.Todo.findById(req.params.todo_id);\n    await db.Todo.update(\n      { _id: updatedTodo },\n      {\n        $set: {\n          done: true,\n        }\n      }\n   );\n    return res.status(200).json(updatedTodo);\n  } catch (err) {\n    return next(err);\n  }\n};","spans":[]},{"type":"paragraph","text":"I also really like the direction they're going with having to initialize a cluster in order to deploy the server on the backend. While I still really need to look more into the concept of clusters and sharding (way more complicated than necessary for this app) it's still awesome that MongoDB is streamlining this process and basically making it impossible (as far as I know) to deploy a server on Heroku without first setting up a cluster on Atlas. ","spans":[{"start":188,"end":209,"type":"hyperlink","data":{"link_type":"Web","url":"https://docs.mongodb.com/manual/sharding/"}},{"start":443,"end":448,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.knowi.com/blog/getting-started-with-mongodb-atlas-overview-and-tutorial/"}}]},{"type":"paragraph","text":"","spans":[]},{"type":"heading5","text":"The distinction between containers and components","spans":[{"start":0,"end":49,"type":"strong"}]},{"type":"paragraph","text":"I used to think everything was a component, but I like that with a Redux application you need to deliberately architect the places you want the state to reside with containers, which look a lot like components but have a few extra attributes. Anywhere you want to bring in your state you need to make sure to create your mapStateToProps function and use react-redux connect to hydrate your state.","spans":[{"start":354,"end":365,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.npmjs.com/package/react-redux"}}]},{"type":"preformatted","text":"function mapStateToProps(reduxState) {\n  return {\n    currentUser: reduxState.currentUser,\n    errors: reduxState.errors,\n  };\n}\n\nexport default withRouter(\n  connect(mapStateToProps, {\n    authUser,\n    removeError,\n  })(App)\n);","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"heading5","text":"Authentication","spans":[{"start":0,"end":14,"type":"strong"}]},{"type":"paragraph","text":"I have spent so much of this year as a frontend engineer so it was really nice to re-visit auth and I mean that genuinely and sincerely. I like salt rounds and JWT and all that fun stuff even if it can be a pain to debug and make you feel like you're having an existential crisis. ","spans":[]},{"type":"preformatted","text":"exports.signin = async function (req, res, next) {\n  try {\n    let user = await db.User.findOne({\n      email: req.body.email\n    })\n    let { id, username, profileImageUrl } = user\n    let isMatch = await user.comparePassword(req.body.password)\n    if (isMatch) {\n      let token = jwt.sign(\n        {\n          id,\n          username,\n          profileImageUrl\n        },\n        process.env.SECRET_KEY\n      )\n      return res.status(200).json({\n        id,\n        username,\n        profileImageUrl,\n        token\n      })\n    } else {\n      return next({\n        status: 400,\n        message: \"That is an invalid user name or password mate\"\n      })\n    }\n  } catch (e) {\n    return next({status: 400, message: \"Error in catch of server / handlers - Invalid email or username\"})\n  }\n}","spans":[]},{"type":"paragraph","text":"Here we are signing up a user in the user handler with the help of JWT.","spans":[]},{"type":"preformatted","text":"if (localStorage.jwtToken) {\n  setAuthorizationToken(localStorage.jwtToken);\n  try {\n    store.dispatch(setCurrentUser(jwtDecode(localStorage.jwtToken)))\n  } catch (e) {\n    store.dispatch(setCurrentUser({}))\n  }\n}","spans":[]},{"type":"paragraph","text":"Then in the index.js of the client using it again to decode the user token that was stored in local storage. ","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"heading4","text":"Conclusion","spans":[{"start":0,"end":10,"type":"strong"}]},{"type":"paragraph","text":"In my experience, I rarely get the opportunity to crank out a production-ready full-stack application by myself in a matter of days. Usually, I am hyper-focusing on a specific problem or really getting granular on some UX UI front-end development that needs to be primo. Now, this todo app is far from anything to write home about, but It's a great exercise to go through the motions of building a full-stack application from start to deployment, even if it's just a small silly app like this one. I implore you to try and do this from time to time whether you're primarily a frontend or backend dev. It's a great exercise. We all need to know what we're building on top of even if it's just at a higher level.","spans":[]},{"type":"paragraph","text":"- You can check out this app here or go straight to the repo here. ","spans":[{"start":29,"end":33,"type":"hyperlink","data":{"link_type":"Web","url":"https://todo-client-kn.herokuapp.com/"}},{"start":61,"end":65,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/kahilnayton/full_stack_todos"}}]},{"type":"paragraph","text":"","spans":[]}],"preview_text":"When it comes to building React applications, using a third-party tool such as redux to manage state can be a tad overkill, and for the most part, you could probably make do with the context API, which comes shipped with React 16. Having said that... I'm going to use Redux purely from an exploratory perspective. Instead of ranting on about how redux works (you can check out their excellent documentation here) I'm just going to point out a couple of places that were significant for me at least or areas that were just very cool. 🤓","release_date":"2020-12-14T05:00:00+0000","_meta":{"uid":"full-stack-todo-app"},"blog_image":{"dimensions":{"width":2500,"height":713},"alt":null,"copyright":null,"url":"https://prismic-io.s3.amazonaws.com/kahildev/a5084aab-224e-4859-a465-4d2647fc04bf_mongodb.svg"},"tech_stack":[{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/a5084aab-224e-4859-a465-4d2647fc04bf_mongodb.svg","alt":"MongoDB","copyright":null,"dimensions":{"width":2500,"height":713}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/e64e9e64-7b43-4736-a5b8-eb8cd7418efc_heroku-original-wordmark.svg","alt":"Heroku","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/5c35524d-a69c-47a9-ad0b-20e4c6593268_redux-original.svg","alt":"Redux","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/1769e61f-452b-4e91-b738-a1ffb65834bc_react-original-wordmark.svg","alt":"React","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/3ac9cba5-2e36-4a80-9323-38f9d7039ed9_express-original-wordmark.svg","alt":"Express","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/df693486-c5b7-427e-a24c-991b6b25a386_sass-original.svg","alt":"sass","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/f0576f62-8c11-4be4-8357-e043f79bc65e_javascript-original.svg","alt":"js","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://images.prismic.io/kahildev/d80ff1f0-d1b5-4bc6-b4eb-7127e276e1a1_jwt.png?auto=compress,format","alt":"jwt","copyright":null,"dimensions":{"width":1016,"height":1034}}]}],"blog_link":{"__typename":"PRISMIC__ExternalLink","target":null,"url":"https://todo-client-kn.herokuapp.com/"}}},{"blog":{"__typename":"PRISMIC_Blog","title":[{"type":"heading1","text":"Leading Edge - filtering","spans":[]}],"description":[{"type":"heading1","text":"Leading Edge - filtering front to back","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"A CMS solution for a client that was set up with Prismic and Gatsby. Also took advantage of Netlify for email notification and cloud hosting. The newsletter subscription was set up through Mail Chimp.","spans":[{"start":0,"end":68,"type":"strong"}]},{"type":"paragraph","text":"Often times you’ll have a fairly complicated assortment of resources to filter through on the front end. I’m going to walk you through our approach to filtering through a resource room with Prismic and Gatsby. If you’re new to Prismic or Gatsby be sure to check out their excellent docs to get started.","spans":[{"start":227,"end":234,"type":"hyperlink","data":{"link_type":"Web","url":"https://prismic.io/docs","target":"_blank"}},{"start":238,"end":244,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.gatsbyjs.org/docs/","target":"_blank"}}]},{"type":"heading3","text":"Templates","spans":[]},{"type":"paragraph","text":"Templates to the rescue! If we structure our CMS in a thoughtful way then we can abstract away a lot of the complexity of filtering on the front-end. In Prismic you’ll need to create a repeatable content type of category and assign a category for each blog. Or in traditional back end speak there needs to be a one-to-many relationship between blogs and categories. This way we’re able to assign the data with its own designated endpoint for each category. Let’s explore how.","spans":[]},{"type":"paragraph","text":"Here’s an example of how a blog content type could look. The essential takeaway here is including a unique uid, which we will use for our routing and dynamic page generation.","spans":[]},{"type":"paragraph","text":"In our application, we’re going to generate templates with the help of gatsby-source-prismic-graphql","spans":[]},{"type":"paragraph","text":"I would recommend this plugin over gatsby-source-prismic because it comes with content previewing right out of the box, which is a pretty essential feature if your client is not tech-savvy and are going to be updating the application independently.","spans":[]},{"type":"paragraph","text":"gatsby-config.js","spans":[]},{"type":"preformatted","text":" {\n      resolve: 'gatsby-source-prismic-graphql',\n      options: {\n        repositoryName: 'leading-edge',\n        path: '/preview',\n        previews: true,\n        pages: [\n          {\n            type: 'Post',\n            match: '/post/:uid',\n            path: '/post-preview',\n            component: require.resolve('./src/templates/post.js'),\n          },\n          {\n            type: 'Person',\n            match: '/bio/:uid',\n            path: '/bio-preview',\n            component: require.resolve('./src/templates/bio.js'),\n          },\n          {\n            type: 'Person',\n            match: '/author/:uid',\n            path: '/author-preview',\n            component: require.resolve('./src/templates/author.js'),\n          },\n          {\n            type: 'Resource',\n            match: '/resource/:uid',\n            path: '/resource-preview',\n            component: require.resolve('./src/templates/resource.js'),\n          },\n          {\n            type: 'Topic',\n            match: '/topic/:uid',\n            path: '/topic-preview',\n            component: require.resolve('./src/templates/topic.js'),\n          },\n          {\n            type: 'Simple_page',\n            match: '/page/:uid',\n            path: '/simple-page-preview',\n            component: require.resolve('./src/templates/simple-page.js'),\n          },\n          {\n            type: 'Category',\n            match: '/blog/:uid',\n            path: '/category-preview',\n            component: require.resolve('./src/templates/category.js'),\n          },\n        ],\n      },\n    },\n    {\n      resolve: 'gatsby-plugin-react-svg',\n      options: {\n        rule: {\n          include: /vectors/,\n        },\n      },\n    },","spans":[]},{"type":"paragraph","text":"The pages attribute is what finds all our uid’s and dynamically creates our routes. Here’s what the post.js template could look like: ","spans":[]},{"type":"preformatted","text":"export const query = graphql`\n  query getPost($uid: String!) {\n    prismic {\n      postByUID: post(uid: $uid, lang: \"en-us\") {\n        _meta {\n          uid\n          firstPublicationDate\n        }\n        title\n        unlisted\n        deck\n        publish_date\n        category {\n          ... on PRISMIC_Category {\n            title\n            _meta {\n              uid\n            }\n          }\n        }\n        authors {\n          author {\n            ... on PRISMIC_Person {\n              _meta {\n                uid\n              }\n              name\n              short_bio\n              image\n              hide_bio\n            }\n          }\n        }\n        feature_image\n        preview_image\n        related_posts {\n          post {\n            ... on PRISMIC_Post {\n              title\n              deck\n              _meta {\n                uid\n              }\n              category {\n                ... on PRISMIC_Category {\n                  title\n                }\n              }\n              feature_image\n              preview_image\n            }\n          }\n        }\n        body {\n          ... on PRISMIC_PostBodyText {\n            type\n            primary {\n              content\n            }\n          }\n          ... on PRISMIC_PostBodyPullquote {\n            type\n            primary {\n              text\n            }\n          }\n          ... on PRISMIC_PostBodyBlock_image {\n            type\n            primary {\n              image\n              caption\n              credit\n            }\n          }\n          ... on PRISMIC_PostBodyCustom_html {\n            type\n            primary {\n              content\n            }\n          }\n        }\n        social_title\n        social_description\n        social_image\n      }\n    }\n  }\n`;","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"heading3","text":"GraphQL","spans":[]},{"type":"paragraph","text":"Our qraphQL query is set up to take a UID as a parameter and fetch the corresponding data depending on what UID is passed in. ","spans":[]},{"type":"paragraph","text":"Now that we have all our posts rendered as their own page we can move on to the categories and define a template for those.","spans":[]},{"type":"paragraph","text":" gatsby-config-js","spans":[]},{"type":"preformatted","text":" {\n            type: 'Category',\n            match: '/blog/:uid',\n            path: '/category-preview',\n            component: require.resolve('./src/templates/category.js'),\n          },","spans":[]},{"type":"paragraph","text":"Again the important take away is the uid that we’re passing into our graphql query.","spans":[]},{"type":"preformatted","text":"const postQuery = graphql`\n  query getCategoryPosts($first: Int = 12, $after: String, $id: String!) {\n    prismic {\n        categoryPosts: allPosts(first: $first, after: $after, sortBy: publish_date_DESC, where: {category: $id}) {\n            edges {\n                node {\n                    unlisted\n                    deck\n                    feature_image\n                    publish_date\n                    title\n                    category {\n                        ... on PRISMIC_Category {\n                            title\n                            description\n                        }\n                    }\n                    preview_image\n                    _meta {\n                        uid\n                    }\n                }\n            }\n        }\n    }\n  }\n`","spans":[]},{"type":"paragraph","text":"The where keyword in graphql defines the condition for the data we are querying so the above code will define an endpoint for each category and fetch all blog posts that are under that category. ","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"heading3","text":"Front End Filtering","spans":[]},{"type":"paragraph","text":"If you have a second factor to sort by then we’ll need to take this one step further and drill into each section on the front end. ","spans":[]},{"type":"paragraph","text":"Let’s create a select element and use the handle change to trigger a filterByType() method. There will of course have to be a type associated with each of our blog posts so make sure you have that set up in your CMS.","spans":[]},{"type":"paragraph","text":"Here we’re taking the target from the select and beginning the filtering process:","spans":[]},{"type":"preformatted","text":"async fetchPosts() {     this.props.prismic       .load({         variables: {           after: getCursorFromDocumentIndex(this.state.loadedPostTotal - 1)         }       })       .then(res => {         const loadedPosts = res.data.allPosts.edges;          this.setState({           loadedPostTotal: this.state.loadedPostTotal + loadedPosts.length,           posts: this.state.posts.concat(loadedPosts.filter(post => !post.node.unlisted)),           total: res.data.allPosts.totalCount,         });          return this.state.loadedPostTotal;        })       .then(newTotal => {         if (newTotal < this.state.total) {           this.fetchPosts();          } else {           this.setState({             loaded: true,             currentPosts: this.state.posts.slice(this.state.firstPost, this.state.lastPost),           });         }       })      return true;   }","spans":[]},{"type":"paragraph","text":"Since the data is going to be a changing variable we need to first set the state with the blogs by category.","spans":[]},{"type":"paragraph","text":"The setCurrentBlogs() method is going to asynchronously splice, depending on how many blogs we want to see per page, and set the state with the new posts. ","spans":[]},{"type":"preformatted","text":" async setCurrentPosts() {\n    await this.setState({\n      loaded: false,\n    })\n\n    await this.setState({\n      currentPosts: this.state.posts.slice(this.state.firstPost, this.state.lastPost),\n      loaded: true,\n    })\n  }","spans":[]},{"type":"paragraph","text":"That’s pretty much it! Now you have the filtered blogs in state that are going to change dynamically in your render method in a clean and concise way. You can check out the finished product here.","spans":[{"start":190,"end":194,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.leadingedge.org/resources","target":"_blank"}}]},{"type":"paragraph","text":"Filtering a complicated resource room for a client can take a bit of planning at times, but with the right setup on the backend, graphQL, React and a bit of es6 thrown in you can get it together is a pretty readable and maintainable way. ","spans":[]}],"preview_text":"Templates to the rescue! If we structure our CMS in a thoughtful way then we can abstract away a lot of the complexity of filtering on the front-end. In Prismic you’ll need to create a repeatable content type of category and assign a category for each blog. Or in traditional back end speak there needs to be a one-to-many relationship between blogs and categories. This way we’re able to assign the data with its own designated endpoint for each category. Let’s explore how.\n\nHere’s an example of how a blog content type could look. The essential takeaway here is including a unique uid, which we will use for our routing and dynamic page generation.","release_date":"2020-08-01T04:00:00+0000","_meta":{"uid":"leading-edge---filtering-front-to-back"},"blog_image":{"dimensions":{"width":600,"height":600},"alt":"Leading edge logo","copyright":null,"url":"https://images.prismic.io/kahildev/122c7c1c-4239-4290-b3b2-769f1361e3b5_icon_leading-edge.png?auto=compress,format"},"tech_stack":[{"tech":[{"type":"image","url":"https://images.prismic.io/kahildev/6e8bf9c4-6381-4a81-ae05-ee5284dfdfe1_stripe.png?auto=compress,format","alt":"Stripe","copyright":null,"dimensions":{"width":512,"height":512}}]}],"blog_link":{"__typename":"PRISMIC__ExternalLink","target":null,"url":"https://www.leadingedge.org/resources"}}},{"blog":{"__typename":"PRISMIC_Blog","title":[{"type":"heading1","text":"Deep Fakes - multilanguage application","spans":[]}],"description":[{"type":"heading1","text":"Deep Fakes - A guide to building multilanguage applications with Prismic and Redux","spans":[]},{"type":"heading5","text":"","spans":[]},{"type":"paragraph","text":"There is probably a myriad of ways to go about setting up a multi-language site with React and Prismic. However, since the online examples of this are a little thin I figured I’d do a quick run-through of the approach we took when building this manipulated media site for Reuters.","spans":[{"start":240,"end":244,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.reuters.com/manipulatedmedia","target":"_blank"}}]},{"type":"image","url":"https://images.prismic.io/kahildev/be3f8ddb-40b6-49dc-92d4-ec69abd341d9_spring_logo.png?auto=compress,format","alt":"Spring","copyright":null,"dimensions":{"width":954,"height":954}},{"type":"heading5","text":"What is Prismic","spans":[{"start":0,"end":15,"type":"strong"}]},{"type":"paragraph","text":"Prismic is a CMS that is completely free to use for one team member and scales very affordably for small teams. It also has a very intuitive setup for working with multiple languages. You’ll first want to connect Prismic to your existing react application by following the steps here and then you can start adding translations from the Prismic GUI under settings.","spans":[{"start":0,"end":112,"type":"em"},{"start":279,"end":283,"type":"hyperlink","data":{"link_type":"Web","url":"https://prismic.io/docs/reactjs/getting-started/integrating-with-an-existing-project","target":"_blank"}}]},{"type":"paragraph","text":"If you followed the steps from the article above you will now have a react app set up and an entry point to Prismic that will look something like this:","spans":[]},{"type":"paragraph","text":"index.js","spans":[{"start":0,"end":8,"type":"em"}]},{"type":"preformatted","text":"import \"regenerator-runtime/runtime\";\nimport { call, put, takeEvery } from \"redux-saga/effects\";\n\nimport { push } from \"connected-react-router\";\n\nimport Prismic from \"prismic-javascript\";\n\nconst prismicClient = Prismic.client(\"https://<project-name>.prismic.io/api/v2\");","spans":[]},{"type":"paragraph","text":"We are going to utilize the Prismic.Predicates method to help us retrieve each newly requested language:","spans":[{"start":28,"end":46,"type":"em"}]},{"type":"preformatted","text":"  let glossary = {};\n  let entries = yield prismicClient.query(\n    Prismic.Predicates.at(\"document.type\", \"glossary\"),\n    {\n      lang: lang,\n    }\n  );\n  yield put({\n    type: \"GLOSSARY_RETURNED\",\n    entries,\n  });\n}","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"To manage state on the front end we’re going to use Redux and dispatchPageRequest() to update the selected language and then a helper function from `connected-react-router` to redirect the page.","spans":[]},{"type":"paragraph","text":"Here’s an example of a Redux dispatch method (you will likely need multiple methods for each section of your application)","spans":[{"start":0,"end":44,"type":"em"}]},{"type":"preformatted","text":"export function dispatchPageRequest(langCode, changeRoute, index, currentLang) {\n  return { type: \"PAGES_REQUESTED\", langCode, changeRoute, index, currentLang };\n}\nexport function dispatchLandingDataRequest(\n  langCode,\n  changeRoute,\n  index,\n  currentLang\n) {\n  return { type: \"LANDING_DATA\", langCode, changeRoute, index, currentLang };\n}\nexport function dispatchNavRequest() {\n  return { type: \"NAVTEXT_REQUESTED\" };\n}\nexport function dispatchGlossaryRequest(langCode) {\n  return { type: \"GLOSSARY_REQUESTED\", langCode };\n}\nexport function dispatchSectionRequest(id, langCode, index) {\n  return { type: \"SECTION_REQUESTED\", id, langCode, index };\n}\nexport function dispatchQuizSectionRequest(id, langCode, index) {\n  return { type: \"QUIZ_SECTION_REQUESTED\", id, langCode, index };\n}","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"For this site, we had 16 different languages to render so in order to sort through them we created a fetchPages method that would switch the lang code depending on which was passed in. The cases in this conditional needed to match up exactly with what was being returned from Prismic.","spans":[{"start":4,"end":13,"type":"hyperlink","data":{"link_type":"Web","url":"https://www.reuters.com/manipulatedmedia","target":"_blank"}}]},{"type":"preformatted","text":"export function* fetchPages(action) {\n  let lang = \"en-us\";\n  if (action.langCode) {\n    switch (action.langCode) {\n      case \"es\":\n        lang = \"es-es\";\n        break;\n      case \"fr\":\n        lang = \"fr-fr\";\n        break;\n      case \"ar\":\n        lang = \"ar-ae\";\n        break;\n      case \"ru\":\n        lang = \"ru\";\n        break;\n      case \"he\":\n        lang = \"he\";\n        break;\n      case \"bu\":\n        lang = \"bu-my\";\n        break;\n      case \"zh\":\n        lang = \"zh-cn\";\n        break;\n      case \"da\":\n        lang = \"da-dk\";\n        break;\n      case \"de\":\n        lang = \"de-de\";\n        break;\n      case \"hi\":\n        lang = \"hi-in\";\n        break;\n      case \"id\":\n        lang = \"id\";\n        break;\n      case \"ja\":\n        lang = \"ja-jp\";\n        break;\n      case \"pt\":\n        lang = \"pt-br\";\n        break;\n      case \"sv\":\n        lang = \"sv-se\";\n        break;\n      case \"tr\":\n        lang = \"tr\";\n        break; \n    }\n  }","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"In addition to Redux, Redux-saga was used as middleware, which was accessing the Redux state and managing any change asynchronously. We’re going to import some helper functions from this middleware, call, put and takeEvery. The takeEvery method, helps us fetch the new languages concurrently.","spans":[{"start":22,"end":32,"type":"hyperlink","data":{"link_type":"Web","url":"https://redux-saga.js.org/","target":"_blank"}},{"start":224,"end":292,"type":"em"}]},{"type":"paragraph","text":"Ok, we’re just about there! Let's look at how we can take the user input and follow it back to updating Redux. For our purposes we wanted different actions to occur with different events. Here is what the hover state looked like:","spans":[]},{"type":"paragraph","text":"The inbuilt onMouseEnter() and onMouseLeave() methods are going to do just nicely to help up pull this off. Each button has an id that lines up with one of those lang codes and then when you hover, a functions is triggered that filters through the data and sets the state of the component.","spans":[{"start":0,"end":108,"type":"em"}]},{"type":"preformatted","text":"  onMouseEnter(event) {\n    const langCode = event.target.id;\n    if (this.props.landingData) {\n      const langData = this.props.landingData.filter((data) => {\n        if (data.lang === langCode) {\n          return data;\n        }\n      });\n      this.setState({\n        upper_text: langData[0].data.description[0].text,\n        title: langData[0].data.title,\n        manipulated_image: langData[0].data.manipulated_image.url,\n        sponsored_by: langData[0].data.sponsored_by,\n      });\n    }\n  }","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"When you hover away from the button we access our nested state with the spread operator and reset it based on the default props.","spans":[]},{"type":"preformatted","text":"  onMouseLeave(event) {\n    this.setState({\n      ...this.state,\n      upper_text: this.props.page.data.description[0].text,\n      title: this.props.page.data.title,\n      manipulated_image: this.props.page.data.manipulated_image.url,\n      sponsored_by: this.props.page.data.sponsored_by,\n      landingData: this.props.page.data.landingData,\n      id: this.props.page.lang,\n    });\n  }","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"Let's cover the click event where we want to access the Redux store and rehydrate the application with the selected data. When a user clicks the dispatchPageRequest() method we wrote earlier will be called and the langCode from that button id will be passed along. The return will have a type of ‘PAGES_REQUESTED’. Specifying the type like this allows the react-saga middleware to handle this update concurrently as I mentioned earlier.","spans":[]},{"type":"preformatted","text":"export function dispatchPageRequest(langCode, changeRoute, index, currentLang) {   return { type: \"PAGES_REQUESTED\", langCode, changeRoute, index,      currentLang };}","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"In the meantime we want to be checking for a click event and if the props have been updated on the landing page. We’ll do this in the componentDidUpdate() lifecycle method, which will continue to check recursively for when there is a change.","spans":[]},{"type":"heading5","text":"","spans":[]},{"type":"preformatted","text":"  componentDidUpdate(prevProps) {\n    if (\n      this.props.hasClicked !== prevProps.hasClicked ||\n      this.props.langCode !== prevProps.langCode\n    ) {\n      if (this.props.hasClicked) {\n        scrollIntoView(document.getElementById(\"intro\"), {\n          time: 3000,\n        });\n      }\n    }\n    if (this.state.video === \"\" && this.props.page.data !== undefined) {\n      this.setState({\n        video: this.props.page.data ? this.props.page.data.landing_video : \"\",\n      });\n    }\n  }","spans":[]},{"type":"heading5","text":"","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"heading5","text":"Conclusion","spans":[{"start":0,"end":10,"type":"strong"}]},{"type":"paragraph","text":"This has been a pretty broad overview of our solution for implementing multiple languages in a react application. If you have other ways of dealing with multilingual sites I’d love to hear your approach.","spans":[]}],"preview_text":"In addition to Redux, Redux-saga was used as middleware, which was accessing the Redux state and managing any change asynchronously. We’re going to import some helper functions from this middleware, call, put and takeEvery. The takeEvery method, helps us fetch the new languages concurrently.\n\nOk, we’re just about there! Let's look at how we can take the user input and follow it back to updating Redux. For our purposes we wanted different actions to occur with different events. Here is what the hover state looked like:","release_date":"2020-07-07T04:00:00+0000","_meta":{"uid":"deep-fakes"},"blog_image":{"dimensions":{"width":150,"height":150},"alt":null,"copyright":null,"url":"https://prismic-io.s3.amazonaws.com/kahildev/5c35524d-a69c-47a9-ad0b-20e4c6593268_redux-original.svg"},"tech_stack":[{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/5c35524d-a69c-47a9-ad0b-20e4c6593268_redux-original.svg","alt":"Redux","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/1769e61f-452b-4e91-b738-a1ffb65834bc_react-original-wordmark.svg","alt":"React","copyright":null,"dimensions":{"width":150,"height":150}}]},{"tech":[{"type":"image","url":"https://prismic-io.s3.amazonaws.com/kahildev/86ee8123-15f8-4474-9984-2e6a2a430c08_prismic-icon.svg","alt":"Prismic","copyright":null,"dimensions":{"width":256,"height":256}}]}],"blog_link":{"__typename":"PRISMIC__ExternalLink","target":null,"url":"https://www.reuters.com/manipulatedmedia"}}}],"blog_heading":[{"type":"heading1","text":"Recent Blogs","spans":[]}]}}]}}},"pageContext":{"rootQuery":"\n  {\n    prismic {\n      allHomes {\n        edges {\n          node {\n            bio {\n              ... on PRISMIC_Bio {\n                heading\n                content\n                _meta {\n                  uid\n                }\n                profile_pic\n              }\n            }\n            content\n            heading\n            project_heading\n            project_list {\n              project {\n                ... on PRISMIC_Project {\n                  title\n                  description\n                  preview_text\n                  release_date\n                  _meta {\n                    uid\n                  }\n                  project_image\n                  project_imageSharp {\n                    absolutePath\n                  }\n                  project_link {\n                    ... on PRISMIC__ExternalLink {\n                      url\n                      target\n                    }\n                  }\n                }\n              }\n            }\n            contact_list {\n              contact {\n                ... on PRISMIC_Contact {\n                  link_label\n                  _linkType\n                  _meta {\n                    uid\n                  }\n                  link {\n                    ... on PRISMIC__ExternalLink {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n            body {\n              ... on PRISMIC_HomeBodyHero {\n                type\n                label\n                primary {\n                  background_image\n                  hero_content\n                  hero_title\n                  background_imageSharp {\n                    childImageSharp {\n                      gatsbyImageData(\n                        placeholder: BLURRED\n                        formats: [AUTO, WEBP, AVIF]\n                      )\n                    }\n                  }\n                }\n              }\n            }\n            contact_heading\n            blog_list {\n              blog {\n                ... on PRISMIC_Blog {\n                  title\n                  description\n                  preview_text\n                  release_date\n                  _meta {\n                    uid\n                  }\n                  blog_image\n                  tech_stack {\n                    tech\n                  }\n                  blog_link {\n                    ... on PRISMIC__ExternalLink {\n                      target\n                      url\n                    }\n                  }\n                }\n              }\n            }\n            blog_heading\n          }\n        }\n      }\n    }\n  }\n"}}